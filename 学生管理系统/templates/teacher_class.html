<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生成绩管理系统</title>
    <link rel="icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="../static/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/main.css"/>


</head>

<body>
<div class="container">
    <div class="header">
        <span class="left">老 师 开 设 课 程 查 看</span>
        <span class="right">你 好，{{user_info}}管 理 员!</span>
        <span class="right_right"><a href="/">退出登陆</a></span>
    </div>
    <div class="leftside">
        <ul>
            <li><a href="/student">学生信息录入</a></li>
            <li><a href ="/updata_student">学生信息修改</a></li>
            <li class="first"><a href="#">老师开设课程查看</a></li>
            <li><a href="/teacher">选课信息录入</a></li>
            <li><a href="/grade">成绩信息录入</a></li>
            <li><a href="/grade_infos">学生成绩查看</a></li>
            <li><a href="/graduation">毕业去向</a></li>
            <li><a href="/adminstator">系统管理员变动</a></li>
            <li><a href="/classes">班级管理</a></li>

        </ul>

    </div>
    <div class="container-fluid">
        <h1 class="sub-header">老 师 开 设 课 程 查 看</h1>
        &nbsp;&nbsp;
        <hr>
        <div class="row">
            <div class="col-md-12">
                <form action="" method="get" class="form-inline">
                    <div class="form-group">
                        <label for="teacher_name">教师名称:</label>
                        <input type="text" class="form-control" id="teacher_name" name="teacher_name" placeholder="请输入教师名称" value="{{teacher_name}}">
                    </div>
                    <div class="form-group">
                        <label for="search_class">开设课程:</label>
                        <input type="text" class="form-control" id="search_class" name="search_class" placeholder="请输入课程名称" value="{{search_class}}">
                    </div>
                    <button type="submit" class="btn btn-primary">搜索</button>
                </form>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>教师名称</th>
                        <th>开设课程1</th>
                        <th>开设课程2</th>
                        <th>开设课程3</th>
                    </tr>
                </thead>
                <tbody>
                    {% for result in results %}
                    <tr>
                        <td>{{result[0]}}</td>
                        <td>{{result[1]}}</td>
                        <td>{{result[2]}}</td>
                        <td>{{result[3]}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <!-- 分页 -->
        <div class="row">
            <div class="col-md-12">
                <div class="pagination-container">
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            {% if page > 1 %}
                            <li>
                                <a href="{{ url_for('teacher_class', page=page-1, teacher_name=teacher_name, search_class=search_class) }}" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            {% endif %}
                            
                            {% for i in range(1, total_pages+1) %}
                            <li {% if page == i %}class="active"{% endif %}>
                                {% if page == i %}
                                <span>{{i}}</span>
                                {% else %}
                                <a href="{{ url_for('teacher_class', page=i, teacher_name=teacher_name, search_class=search_class) }}">{{i}}</a>
                                {% endif %}
                            </li>
                            {% endfor %}
                            
                            {% if page < total_pages %}
                            <li>
                                <a href="{{ url_for('teacher_class', page=page+1, teacher_name=teacher_name, search_class=search_class) }}" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </nav>
                    <div class="pagination-info">
                        <span>共 {{total}} 条记录</span>
                        <span>跳转到</span>
                        <input type="number" id="jumpPage" min="1" max="{{total_pages}}" value="{{page}}">
                        <button onclick="jumpToPage()">确定</button>
                    </div>
                </div>
            </div>
        </div>
        <script>
        function jumpToPage() {
            var page = document.getElementById('jumpPage').value;
            var teacher_name = '{{teacher_name}}';
            var search_class = '{{search_class}}';
            var url = '/teacher_class?page=' + page;
            if (teacher_name) {
                url += '&teacher_name=' + encodeURIComponent(teacher_name);
            }
            if (search_class) {
                url += '&search_class=' + encodeURIComponent(search_class);
            }
            window.location.href = url;
        }
        </script>
    </div>
</div>
</body>

</html>